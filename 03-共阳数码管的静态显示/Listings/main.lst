C51 COMPILER V9.54   MAIN                                                                  12/23/2024 20:48:57 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <reg52.h>
   2          
   3          void Delay(unsigned int t)
   4          {
   5   1          while(t--);
   6   1          while(t--);
   7   1      }
   8          
   9          void InitHC138(unsigned char Num)
  10          {
  11   1          P2 = (P2 & 0x1f) | (Num << 5);
  12   1      }
  13          
  14          void OutPutP0(unsigned char channel,unsigned char dat)
  15          {
  16   1          InitHC138(channel);
  17   1          P0 = dat;
  18   1      }
  19          
  20          void InitSystem()
  21          {
  22   1          OutPutP0(5,0x00);
  23   1      }
  24          
  25          unsigned char NixieCode[] = {0x3F, 0x06, 0x5B, 0x4F, 0x66, 0x6D, 0x7D, 0x07, 0x7F, 0x6F,0x77,0x7C,0x39,0x5
             -e,0x79,0x71,0x00,0x40};
  26          
  27          void Nixie(unsigned char Num,unsigned char Location)
  28          {
  29   1          if (Location < 7)
  30   1          {
  31   2              OutPutP0(6,0x01 << ((Location)%8));
  32   2              OutPutP0(7,~NixieCode[Num]);
  33   2          }
  34   1          else
  35   1          {
  36   2              OutPutP0(6,Location);
  37   2              OutPutP0(7,~NixieCode[Num]);
  38   2          }
  39   1      }
  40          
  41          void Nixie_Advance(unsigned char Mode,unsigned char Num,unsigned char Location)
  42          {
  43   1          switch (Mode)
  44   1          {
  45   2              case 1:
  46   2              {
  47   3                  OutPutP0(6,0x01 << ((Location-1)%8));
  48   3                  OutPutP0(7,~NixieCode[Num]);
  49   3                  break;
  50   3              }
  51   2              case 2:
  52   2              {
  53   3                  OutPutP0(6,Location);
C51 COMPILER V9.54   MAIN                                                                  12/23/2024 20:48:57 PAGE 2   

  54   3                  OutPutP0(7,~NixieCode[Num]);
  55   3                  break;
  56   3              }
  57   2          }
  58   1      }
  59          
  60          void Nixie_Static()
  61          {
  62   1          unsigned char i,j;    
  63   1          for (j = 1; j < 9; j++)
  64   1          {
  65   2              for (i = 0; i < 10; i++)
  66   2              {
  67   3                  Nixie_Advance(1,i,j);
  68   3                  Delay(120000);
  69   3              }
  70   2          }
  71   1          for (i = 0; i < 16; i++)
  72   1          {
  73   2              Nixie_Advance(2,i,0xff);
  74   2              Delay(480000);
  75   2          }
  76   1      }
  77          
  78          
  79          void main()
  80          {
  81   1          InitSystem();
  82   1          Delay(60000);
  83   1          while(1)
  84   1          {
  85   2              Nixie_Static();
  86   2          }
  87   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    199    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     18    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
